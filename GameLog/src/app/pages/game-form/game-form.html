<mat-card class="game-form-card">
  
  <mat-card-title>{{ isEditMode ? 'Editar Jogo' : 'Adicionar Novo Jogo' }}</mat-card-title>
  <mat-card-subtitle>Gerencie seu progresso de jogo.</mat-card-subtitle>

  <mat-card-content>
    
    <form [formGroup]="gameForm" (ngSubmit)="onSubmit()" class="game-form-grid">
      
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Título do Jogo</mat-label>
        <input matInput formControlName="title" required>
        <mat-error *ngIf="gameForm.get('title')?.hasError('required')">O título é obrigatório.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Gênero</mat-label>
        <input matInput formControlName="genre" required>
        <mat-error *ngIf="gameForm.get('genre')?.hasError('required')">O gênero é obrigatório.</mat-error>
      </mat-form-field>
      
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Plataforma</mat-label>
        <input matInput formControlName="platform" required>
        <mat-error *ngIf="gameForm.get('platform')?.hasError('required')">A plataforma é obrigatória.</mat-error>
      </mat-form-field>
      
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Status</mat-label>
        <mat-select formControlName="status" required>
          <mat-option *ngFor="let status of statusOptions" [value]="status">
            {{ status }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div class="form-group-slider">
        <label>Progresso de Conclusão: {{ gameForm.get('progress')?.value }}%</label>
        <mat-slider
          min="0"
          max="100"
          step="5"
          thumbLabel
          [disabled]="gameForm.get('status')?.value === 'Played'"
          formControlName="progress"
        ></mat-slider>
      </div>
      
      <ng-container *ngIf="gameForm.get('status')?.value !== 'To Play'">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Horas Jogadas</mat-label>
          <input matInput formControlName="hoursPlayed" type="number" min="0">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Avaliação (1-5)</mat-label>
          <input matInput formControlName="rating" type="number" min="1" max="5">
          <mat-error *ngIf="gameForm.get('rating')?.invalid">A avaliação deve ser entre 1 e 5.</mat-error>
        </mat-form-field>
      </ng-container>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Data de Início</mat-label>
        <input matInput [matDatepicker]="startDatePicker" formControlName="startDate">
        <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #startDatePicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Data de Conclusão</mat-label>
        <input matInput [matDatepicker]="finishDatePicker" formControlName="finishDate">
        <mat-datepicker-toggle matSuffix [for]="finishDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #finishDatePicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="notes-field">
        <mat-label>Observações/Notas</mat-label>
        <textarea matInput formControlName="notes" rows="3"></textarea>
      </mat-form-field>

      <mat-card-actions class="form-actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="gameForm.invalid">
          {{ isEditMode ? 'Salvar Alterações' : 'Adicionar Jogo' }}
        </button>
        <button mat-button type="button" routerLink="/games">Cancelar</button>
      </mat-card-actions>
      
    </form>
  </mat-card-content>
</mat-card>